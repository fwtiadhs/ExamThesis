@model ExamThesis.Storage.Model.QuestionCategory

<h2>Delete Category</h2>

<p>Are you sure you want to delete this category?</p>

<dl class="row">
    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.QuestionCategoryId)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.QuestionCategoryId)
    </dd>

    <dt class="col-sm-2">
        @Html.DisplayNameFor(model => model.QuestionCategoryName)
    </dt>
    <dd class="col-sm-10">
        @Html.DisplayFor(model => model.QuestionCategoryName)
    </dd>
</dl>

<!-- Render anti-forgery token so we can read it -->
<form id="deleteForm">
    @Html.AntiForgeryToken()
    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    <button type="button" id="deleteButton" class="btn btn-danger">Delete</button>
</form>

@section Scripts {
    <script>
        $(function () {
            $('#deleteButton').on('click', function () {
                if (!confirm("Are you sure you want to delete this category?")) return;

                var token = $('input[name="__RequestVerificationToken"]').val();
                $.ajax({
                    url: '/QuestionCategory/DeletePost/@Model.QuestionCategoryId',
                    type: 'DELETE',
                    headers: {
                        'RequestVerificationToken': token
                    },
                    success: function () {
                        window.location.href = '/QuestionCategory/Index';
                    },
                    error: function (xhr) {
                        console.error('Delete failed', xhr);
                        alert('Delete failed.');
                    }
                });
            });
        });
    </script>
}
